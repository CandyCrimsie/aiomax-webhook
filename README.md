# üöÄ aiomax-webhook

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π webhook‚Äë—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ FastAPI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–µ–±—Ö—É–∫–∞.

---

## üì• –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/CandyCrimsie/aiomax-webhook.git
cd aiomax-webhook
```

---

## üåê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä **Nginx** –∏–ª–∏ **Caddy**.

–í–∞—à —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –ø–æ—Ä—Ç–æ–≤:

```
80, 8080, 443, 8443, 16384-32383
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://dev.max.ru/docs-api/methods/POST/subscriptions

---

## üîÅ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Reverse Proxy

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–∫—Å–∏ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π FastAPI —Å–µ—Ä–≤–µ—Ä:

```
http://127.0.0.1:8000
```

–í—Å–µ webhook‚Äë–∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–∞ endpoint:

```
/webhook
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª:

```
example.env ‚Üí .env
```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å:

- `WEBHOOK_HOST`
- `WEBHOOK_PORT`

‚ö†Ô∏è –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç–µ –∏—Ö ‚Äî –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ **Nginx/Caddy**.

---

## üîê –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–í `.env` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∫–∞–∑–∞–Ω—ã:

```
BOT_TOKEN=
WEBHOOK_SECRET=
```

**WEBHOOK_SECRET** ‚Äî —Å—Ç—Ä–æ–∫–∞ –¥–ª–∏–Ω–æ–π –¥–æ 255 —Å–∏–º–≤–æ–ª–æ–≤.

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python main.py
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –∫–æ–º–∞–Ω–¥—É:

```
/start
```

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç.

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí Nginx/Caddy ‚Üí FastAPI ‚Üí Bot Logic
```

---

## üìÑ –°–≤—è–∑–∞—Ç—å—Å—è

telegram @CandyCrimsie

